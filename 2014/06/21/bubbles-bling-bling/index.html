
 <!DOCTYPE HTML>
<html lang="zh-cn">
<head>
  <meta charset="UTF-8">
  
    <title>bubbles bling bling | lisnb&#39;s garage</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="lisnb">
    
    <meta name="description" content="在很久很久以前，你拥有我，我拥有你今天发现《外面的世界》真好听 (^__^)">
    
    
    
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/pacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/pacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.svg" alt="lisnb&#39;s garage" title="lisnb&#39;s garage"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="lisnb&#39;s garage">lisnb&#39;s garage</a></h1>
				<h2 class="blog-motto">令人愉悦的忧伤</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="http://freebase.lixipeng.me">Freebase ( new! )</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/tags">Tags</a></li>
					
						<li><a href="/categories">Categories</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
					
						<script type="text/javascript">document.write(unescape('%3Cdiv id="bdcs"%3E%3C/div%3E%3Cscript charset="utf-8" src="http://rp.baidu.com/rp3w/3w.js?sid=16513815728315725021') + '&t=' + (Math.ceil(new Date()/3600000)) + unescape('"%3E%3C/script%3E'));</script>

					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/06/21/bubbles-bling-bling/" title="bubbles bling bling" itemprop="url">bubbles bling bling</a>
  </h1>
  <p class="article-author">By
    
      <a href="https://plus.google.com/112143900419777720000?rel=author" title="lisnb" target="_blank" itemprop="author">lisnb</a>
    </p>
  <p class="article-time">
    <time datetime="2014-06-21T09:03:29.000Z" itemprop="datePublished">6月 21 2014</time>
    Updated:<time datetime="2014-06-25T02:53:00.000Z" itemprop="dateModified">6月 25 2014</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<blockquote>
<p>在很久很久以前，你拥有我，我拥有你<br>今天发现《外面的世界》真好听 (<em>^__^</em>) </p>
</blockquote>
<a id="more"></a>

<script type="text/javascript" src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript" src="/js/customize/bubble/udalpha.js"></script>
<input type="hidden" id="bubbleword" value="南开大学">
<canvas id="myCanvas"></canvas>
<script type="text/javascript" src="/js/customize/bubble/bubbles.js"></script>
<script type="text/javascript" src="/js/customize/bubble/main.js"></script>

<p>明天是本科学校的毕业晚会<br>“聚散天涯，依依南开”<br><img src="/img/0621/1.PNG" alt=""><br>那天很激动，感觉离开很舍不得，非常的“依依”。到现在没有人拿着这个状态质问我到底回不回去，反倒是当我说我想回去看看的时候，都在问我：你回去干嘛？<br>嗯，又不是杰出校友。<br>不过作为一个杰出菜逼校友，悄悄的溜回去看一下，还是请大家高抬贵手，轻喷<br>有大半年没回去了（每次我这么说都很忐忑，因为总感觉有种“你爱多久没回去就没回去呗，学校又不在乎你”的感觉，不过你知道的，鹏宝是一个感性的人捂脸笑），跟小马哥说好了要回去，小马哥表示欢迎，并表示可以住在他们宿舍，我非常开心，上一次回去也是在他宿舍睡的，但现在头发有点长，不知道能不能进去呢。<br>其实主要是感觉头发不知道什么时候就剪掉了，赶紧抓紧时间回去得瑟一下，要不白留了（我这人，太丁日虚荣捂脸笑）</p>
<hr>
<p>前几天翻到<a href="http://gate.guokr.com/" title="果壳任意门" target="_blank" rel="external">果壳任意门</a>，在编程语言那个tab下面看到了“Codecademy”（没错就这点出息了），一直想学点js，css什么的，因为鹏宝对美好的事物总是有些追求尽管鹏宝自己并不那么美好。<br>它的第一个课程是“<a href="http://www.codecademy.com/zh/courses/animate-your-name/0/1" title="codecademy: animate your name" target="_blank" rel="external">Animate Your Name</a>”，就用一些小泡泡把你输入的东西画出来，鼠标划上去就动，跟上面的一样，我觉得太漂亮了因为鹏宝没见过什么世面，正好还是个教程，所以那天晚上毅然放下了手里的活计，开始教程。<br><img src="/img/0621/2.PNG" alt=""><br><img src="/img/0621/3.PNG" alt=""><br>结果教程只是在说一些基本的js，定义变量啊，列表啊什么的，根本没有讲怎么画这些小泡泡并且让它动起来，我很惋惜，所以就找到了它的源文件，想自己看一下。<br>主要有三个源文件</p>
<ul>
<li>main.js  这个里面就是定义显示什么文字还有泡泡的颜色的</li>
<li>bubble.js  主要的文件，画泡泡和接收鼠标事件然后做出动作的</li>
<li>alphabet.js  一开始没看懂，后来明白了。是把文字转换成点阵坐标的<br>看到最后的文件，我想起来大一在上C++的上机课的时候，王超老师让我们写一个小程序，输入一个字母，然后用这个字母作为“像素”，把这个字母表示出来<br>大概就是这个样子：<br><img src="/img/0621/4.PNG" alt=""><br>后来老师想了想，算了吧，太难了，固定输出一个字母的形状就行了。<br>当时好像也觉得，给一个字母，不知道字母各个像素的坐标是什么，怎么能表示出来呢<br>所以这个教程里引入了一个js文件，内容大概就是：<br><figure class="highlight javascript"><figcaption><span>alphabet.js</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.alphabet={</div><div class="line">                A79:{</div><div class="line">                        W:<span class="number">75</span>,P:[[<span class="number">64</span>,<span class="number">89</span>,<span class="number">9</span>,-<span class="number">102</span>],[<span class="number">57</span>,<span class="number">103</span>,<span class="number">9</span>,-<span class="number">102</span>],[<span class="number">5</span>,<span class="number">89</span>,<span class="number">9</span>,-<span class="number">79</span>],</div><div class="line">                                [<span class="number">16</span>,<span class="number">104</span>,<span class="number">8</span>,-<span class="number">35</span>],[<span class="number">51</span>,<span class="number">122</span>,<span class="number">8</span>,-<span class="number">35</span>],[<span class="number">23</span>,<span class="number">118</span>,<span class="number">8</span>,-<span class="number">35</span>],</div><div class="line">                                [<span class="number">31</span>,<span class="number">133</span>,<span class="number">8</span>,<span class="number">50</span>],[<span class="number">46</span>,<span class="number">136</span>,<span class="number">8</span>,<span class="number">50</span>],[<span class="number">34</span>,<span class="number">153</span>,<span class="number">8</span>,<span class="number">69</span>],</div><div class="line">                                [<span class="number">28</span>,<span class="number">168</span>,<span class="number">7</span>,<span class="number">112</span>],[<span class="number">21</span>,<span class="number">183</span>,<span class="number">7</span>,<span class="number">112</span>]]},</div><div class="line">                A78:{</div><div class="line">                        W:<span class="number">85</span>,P:[[<span class="number">10</span>,<span class="number">148</span>,<span class="number">8</span>,-<span class="number">103</span>],[<span class="number">21</span>,<span class="number">137</span>,<span class="number">8</span>,-<span class="number">92</span>],[<span class="number">33</span>,<span class="number">125</span>,<span class="number">7</span>,-<span class="number">79</span>],</div><div class="line">                                [<span class="number">50</span>,<span class="number">124</span>,<span class="number">7</span>,-<span class="number">35</span>],[<span class="number">58</span>,<span class="number">135</span>,<span class="number">7</span>,-<span class="number">35</span>],[<span class="number">68</span>,<span class="number">148</span>,<span class="number">7</span>,-<span class="number">35</span>],</div><div class="line">                                [<span class="number">40</span>,<span class="number">111</span>,<span class="number">7</span>,<span class="number">51</span>],[<span class="number">33</span>,<span class="number">103</span>,<span class="number">7</span>,<span class="number">51</span>],[<span class="number">21</span>,<span class="number">86</span>,<span class="number">7</span>,<span class="number">51</span>],</div><div class="line">                                [<span class="number">56</span>,<span class="number">106</span>,<span class="number">7</span>,<span class="number">51</span>],[<span class="number">67</span>,<span class="number">92</span>,<span class="number">7</span>,<span class="number">112</span>]]},</div><div class="line">                ...};</div></pre></td></tr></table></figure><br>上面的这段表示的是字母“O”和“N”的各个点的坐标，键值是“A”+字母的ASCII（英语发音：/‘æski/ ASS-kee，以后我读这个的时候不要纠正我这个是 “ask” 或者 “ask2”了行吗），W的值是这个字母的宽度，用于显示多个字符的时候计算offsite.<br>后面的P就是各个点的坐标了。“O”的第一个点的坐标[64, 89, 9, -102]，64和89分别是横纵坐标（咦，这两个数怎么这么奇怪？不要查我水表… ），9是这个点的大小，半径之类的，你看到那些点的大小都不是一样的，第四个数字好像是标示这个点的透明度之类的，原来的代码里用这个数字的部分被注释掉了，但看起来就是比如字母的末端可能fade了之类的。<br>所以通过这个文件就解决了当拥有了泡泡的时候，怎么组成字母的问题。<br><figure class="highlight javascript"><figcaption><span>bubble.js</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">phraseToHex</span><span class="params">(phrase)</span> </span>{</div><div class="line">    <span class="keyword">var</span> hexphrase = <span class="string">""</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; phrase.length; i++) {</div><div class="line">        hexphrase += phrase.charCodeAt(i).toString(<span class="number">16</span>);</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> hexphrase;</div><div class="line">}</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawName</span><span class="params">(name,colors)</span></span>{</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">addLetter</span><span class="params">(cc_hex, ix, letterCols)</span> </span>{</div><div class="line">    <span class="comment">//画字符的函数</span></div><div class="line">    ...</div><div class="line">    }</div><div class="line">    <span class="keyword">var</span> hexphrase = phraseToHex(name);</div><div class="line">    <span class="keyword">var</span> col_ix = -<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; hexphrase.length; i += <span class="number">2</span>) {</div><div class="line">        <span class="keyword">var</span> cc_hex = <span class="string">"A"</span> + hexphrase.charAt(i) + hexphrase.charAt(i + <span class="number">1</span>);</div><div class="line">        <span class="keyword">if</span> (cc_hex != <span class="string">"A20"</span>) {</div><div class="line">            col_ix++;</div><div class="line">        }</div><div class="line">        addLetter(cc_hex, col_ix, letterColors);</div><div class="line">    }</div><div class="line">}</div><div class="line">...</div></pre></td></tr></table></figure><br>先用phraseToHex函数把输入的字母字符串，转换成ASCII的字符串，然后每两个前面加上一个“A”去document.alphabet里找字符的点阵坐标，画出。<br>我一开始觉得这个屌啊，这岂不是可以表示一切了么，所以就写了几个汉字，结果表示出来的并不是汉字，而是几个字母，后来我才想起来，这个文件里没有汉字的点阵坐标，所以表示不出来汉字。<br>那个bubble.js我还没有完全看懂，尤其是语法，因为javascrip的函数定义方式感觉很奇怪，我主要想解决的问题是，怎么能够让这个玩意显示汉字呢。<br>最主要的就是1、给出汉字的坐标；2、以汉字为键值，找到这个坐标。<br>对于第一个问题：怎样给出汉字的坐标<br>我的解决思路是，手工的去写，这样能保证非常精准。开玩笑的，怎么可能，多傻逼啊…<br>之前写过一个把图片转换成字符画的小程序<br><img src="/img/0621/ali.jpg" alt=""><br><img src="/img/0621/5.PNG" alt=""><br>呃…虽然失真比较严重，是因为阈值没有仔细设置而且字符比较单一，知道可以实现就放在那了。<br>就是把图片灰度化，然后根据像素的数值[110,255]的就是空白，[40,110)的就是”.”，[0,40)的就是”@”。<br>那如果有文字的图片就也可以这么做，所以就把文字先生成图片，然后根据图片的像素标出一些点<br>但实际上，如果以像素为单位的话，那点就太多了，所以就把图片分块，在一个块里，有多少个像素小于一定阈值（就是黑到一定程度，证明这个块是组成字的一部分），这个块就可以形成一个点，再算一下坐标什么的，就可以了。<br>最后根据输入的字符串，生成一个js文件，替换原来的alphabet.js，就搞定了。</li>
</ul>
<figure class="highlight python"><figcaption><span>chartojs.py</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"><span class="comment"># @Author: LiSnB</span></div><div class="line"><span class="comment"># @Date:   2014-06-20 18:36:07</span></div><div class="line"><span class="comment"># @Last Modified by:   LiSnB</span></div><div class="line"><span class="comment"># @Last Modified time: 2014-06-21 19:25:43</span></div><div class="line"><span class="comment"># @Email: lisnb.h@gmail.com</span></div><div class="line"></div><div class="line"><span class="comment">#import os</span></div><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image, ImageFont, ImageDraw</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np </div><div class="line"><span class="keyword">import</span> math </div><div class="line"><span class="comment">#import matplotlib.pyplot as plt</span></div><div class="line"><span class="keyword">import</span> random</div><div class="line"><span class="comment">#import chardet</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">getalphabet</span><span class="params">(text,jspath)</span>:</span></div><div class="line">    size = <span class="number">18</span></div><div class="line">    partical = <span class="number">2</span></div><div class="line">    p_th = math.pow(partical, <span class="number">2</span>)-partical</div><div class="line">    font = ImageFont.truetype(<span class="string">'hwhp.ttf'</span>, size+<span class="number">2</span>)</div><div class="line">    alphas = []</div><div class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> text:</div><div class="line">        im = Image.new(<span class="string">'L'</span>, (size,size),<span class="number">255</span>)</div><div class="line">        dr = ImageDraw.Draw(im)</div><div class="line">        dr.text((<span class="number">0</span>,<span class="number">0</span>), t,font = font,fill=<span class="string">'#000000'</span>)</div><div class="line">        pixel = im.getdata()</div><div class="line">        p_array = np.array(pixel).reshape(size,size).T</div><div class="line">        <span class="comment"># print p_array</span></div><div class="line">        p_array = p_array.tolist()</div><div class="line">        points = []</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(size/partical):</div><div class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(size/partical):</div><div class="line">                a = p_array[partical*i][partical*j:partical*j+<span class="number">2</span>]</div><div class="line">                a.extend(p_array[partical*i+<span class="number">1</span>][partical*j:partical*j+<span class="number">2</span>])</div><div class="line">                <span class="keyword">if</span> a.count(<span class="number">0</span>)&gt;p_th:</div><div class="line">                    tmp_points=<span class="string">'[%s, %s, %s, %s]'</span>%( size*i,</div><div class="line">                                                    size*j+size,</div><div class="line">                                                    random.randint(<span class="number">4</span>,<span class="number">7</span>),</div><div class="line">                                                    <span class="number">0</span>)</div><div class="line">                    points.append(tmp_points)</div><div class="line">        t_key = t.encode(<span class="string">'unicode_escape'</span>)</div><div class="line">        t_key = <span class="string">'A%s'</span>%t_key[<span class="number">2</span>:]</div><div class="line">        P = <span class="string">'P:[%s]'</span>%(<span class="string">','</span>.join(points))</div><div class="line">        alpha = <span class="string">'%s:{W:180,%s}'</span>%(t_key,P)</div><div class="line">        alphas.append(alpha)</div><div class="line"></div><div class="line">    content = <span class="string">'document.alphabet={ %s};'</span>%(<span class="string">','</span>.join(alphas))</div><div class="line">    <span class="keyword">with</span> open(jspath,<span class="string">'wb'</span>) <span class="keyword">as</span> f:</div><div class="line">        f.write(content)</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    getalphabet(<span class="string">u'允公允能日新月异'</span>,<span class="string">'udalphabet.js'</span>)</div></pre></td></tr></table></figure>

<p>这个就可以生成一个拥有“允公允能日新月异”的js文件了。<br>这里有几个问题：</p>
<ul>
<li>文字生成图片使用PIL做的，但官网上的PIL库在编译的时候少了点什么，在使用文字生成图片的时候会报错，我不记得是什么错误了，解决办法是在<a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/" target="_blank" rel="external">Unofficial Windows Binaries for Python Extension Packages</a>这个地方下载非官方的PIL库，并在使用时，由<br>  import Image<br>变成<br>  from PIL import image</li>
<li>文字生成图片的时候，需要指定文字的字体，我本来想用比较喜欢的一些字体，但实际上，因为之后会对图像进行分块，所以要尽量使用粗一点的字体，我选择的是华文琥珀，如果你的电脑上装了这个字体（应该是都装了的），那看起来是这个样子的：<br><span style="font-family:华文琥珀;font-size:30px">英格兰你伤了哥的心了</span><br>但也因为汉字比较复杂，所以最后分辨率比较低，很写意的感觉… </li>
<li>我也不知道原来的那个alphabet.js是怎么规定的，直接按照正常的方向生成的坐标画出来竟然是倒下来的，也懒得研究js的代码了，直接在生成坐标的时候，使用了像素矩阵的转置，就是代码中的第28行<br>p_array = np.array(pixel).reshape(size,size).T</li>
<li>汉字用unicode表示，应该是UTF-8的，所以键值用“A”+t.encode(‘unicode_escape’)[2:]，因为比如“允”的表示是“\u5141”，键值最后是“A5141”。汉字的笔画比较复杂，所以最后生成的点也比较多，结果不在这里放了，可以看这个<a href="/js/customize/bubble/udalpha.js">udalphabet.js</a></li>
</ul>
<p>然后解决第二个问题：以汉字为键值，找到这个坐标<br>原来的版本因为字母使用ASCII表示的，所以每个字符的长度是2，但现在汉字是4，所以要对bubble.js改一点：</p>
<figure class="highlight javascript"><figcaption><span>bubble.js</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawName</span><span class="params">(name,colors)</span></span>{</div><div class="line">    ...</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; hexphrase.length; i += <span class="number">4</span>) {</div><div class="line">        <span class="keyword">var</span> cc_hex = <span class="string">"A"</span> + hexphrase.charAt(i) </div><div class="line">                         + hexphrase.charAt(i + <span class="number">1</span>)</div><div class="line">                         + hexphrase.charAt(i + <span class="number">2</span>)</div><div class="line">                         + hexphrase.charAt(i + <span class="number">3</span>);</div><div class="line">        <span class="keyword">if</span> (cc_hex != <span class="string">"A20"</span>) {</div><div class="line">            col_ix++;</div><div class="line">        }</div><div class="line">        addLetter(cc_hex, col_ix, letterColors);</div><div class="line">    }</div><div class="line">}</div><div class="line">...</div></pre></td></tr></table></figure>

<p>大功告成，最后的效果就是<a href="#myCanvas">这样</a>了。</p>
  
	</div>
		<footer class="article-footer clearfix">

  <div class="article-tags">
  
  <span></span> <a href="/tags/js/">js</a><a href="/tags/bubble/">bubble</a><a href="/tags/python/">python</a><a href="/tags/汉字点阵/">汉字点阵</a>
  </div>


<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/python/">python</a>►<a class="article-category-link" href="/categories/python/js/">js</a>
</div>



<div class="article-share" id="share">

  <div data-url="http://lixipeng.me/2014/06/21/bubbles-bling-bling/" data-title="bubbles bling bling | lisnb&#39;s garage" data-tsina="1394458123" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2014/07/20/first-missing-positive/" title="(leetcode) first missing positive">
  <strong>PREVIOUS:</strong><br/>
  <span>
  (leetcode) first missing positive</span>
</a>
</div>


<div class="next">
<a href="/2014/06/19/gdb-coredumped/"  title="gdb-coredumped">
 <strong>NEXT:</strong><br/> 
 <span>gdb-coredumped
</span>
</a>
</div>

</nav>

	
<section class="comment">
	<div class="ds-thread"></div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
  
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  
  <div class="tagcloudlist">
    <p class="asidetitle">Tag Cloud</p>
    <div class="tagcloudlist clearfix">
       <a href="/tags/C++/" style="font-size: 20.00px;">C++</a><a href="/tags/Linux/" style="font-size: 10.00px;">Linux</a><a href="/tags/T1/" style="font-size: 15.00px;">T1</a><a href="/tags/bubble/" style="font-size: 10.00px;">bubble</a><a href="/tags/c++/" style="font-size: 10.00px;">c++</a><a href="/tags/callgrind/" style="font-size: 10.00px;">callgrind</a><a href="/tags/chrome-extension/" style="font-size: 10.00px;">chrome extension</a><a href="/tags/coredumped/" style="font-size: 10.00px;">coredumped</a><a href="/tags/freebase/" style="font-size: 10.00px;">freebase</a><a href="/tags/gdb/" style="font-size: 10.00px;">gdb</a><a href="/tags/git/" style="font-size: 10.00px;">git</a><a href="/tags/gprof2dot/" style="font-size: 10.00px;">gprof2dot</a><a href="/tags/hexo/" style="font-size: 10.00px;">hexo</a><a href="/tags/io/" style="font-size: 10.00px;">io</a><a href="/tags/javascript/" style="font-size: 10.00px;">javascript</a><a href="/tags/js/" style="font-size: 10.00px;">js</a><a href="/tags/leetcode/" style="font-size: 10.00px;">leetcode</a><a href="/tags/linux/" style="font-size: 15.00px;">linux</a><a href="/tags/mac/" style="font-size: 10.00px;">mac</a><a href="/tags/memcheck/" style="font-size: 10.00px;">memcheck</a><a href="/tags/memory-leak/" style="font-size: 10.00px;">memory leak</a><a href="/tags/pacman/" style="font-size: 10.00px;">pacman</a><a href="/tags/permutation/" style="font-size: 10.00px;">permutation</a><a href="/tags/python/" style="font-size: 20.00px;">python</a><a href="/tags/rdbuf/" style="font-size: 10.00px;">rdbuf</a><a href="/tags/smartisan/" style="font-size: 15.00px;">smartisan</a><a href="/tags/svn/" style="font-size: 10.00px;">svn</a><a href="/tags/valgrind/" style="font-size: 15.00px;">valgrind</a><a href="/tags/傻老娘们儿/" style="font-size: 10.00px;">傻老娘们儿</a><a href="/tags/全排列/" style="font-size: 10.00px;">全排列</a><a href="/tags/共享账户/" style="font-size: 10.00px;">共享账户</a><a href="/tags/内存泄漏/" style="font-size: 10.00px;">内存泄漏</a><a href="/tags/南开大学/" style="font-size: 10.00px;">南开大学</a><a href="/tags/小浣熊/" style="font-size: 10.00px;">小浣熊</a><a href="/tags/招远/" style="font-size: 10.00px;">招远</a><a href="/tags/文件共享/" style="font-size: 10.00px;">文件共享</a><a href="/tags/汉字点阵/" style="font-size: 10.00px;">汉字点阵</a><a href="/tags/浪费/" style="font-size: 10.00px;">浪费</a><a href="/tags/罗永浩/" style="font-size: 10.00px;">罗永浩</a><a href="/tags/老罗/" style="font-size: 20.00px;">老罗</a>
    </div>
  </div>


  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
			<li><a href="/categories/linux/C++/" title="C++">C++<sup>2</sup></a></li>
		
			<li><a href="/categories/C++/" title="C++">C++<sup>2</sup></a></li>
		
			<li><a href="/categories/C++/Linux/" title="Linux">Linux<sup>1</sup></a></li>
		
			<li><a href="/categories/fullstack/" title="fullstack">fullstack<sup>2</sup></a></li>
		
			<li><a href="/categories/hexo/" title="hexo">hexo<sup>1</sup></a></li>
		
			<li><a href="/categories/python/js/" title="js">js<sup>1</sup></a></li>
		
			<li><a href="/categories/leetcode/" title="leetcode">leetcode<sup>1</sup></a></li>
		
			<li><a href="/categories/linux/" title="linux">linux<sup>2</sup></a></li>
		
			<li><a href="/categories/mac/" title="mac">mac<sup>1</sup></a></li>
		
			<li><a href="/categories/python/" title="python">python<sup>2</sup></a></li>
		
			<li><a href="/categories/leetcode/python/" title="python">python<sup>1</sup></a></li>
		
			<li><a href="/categories/python/国哥/" title="国哥">国哥<sup>1</sup></a></li>
		
			<li><a href="/categories/碎碎碎碎念/" title="碎碎碎碎念">碎碎碎碎念<sup>9</sup></a></li>
		
		</ul>
</div>


  <div class="linkslist" style="margin-top:60px;">
  <!--p class="asidetitle">Links</p-->
  <p class="asidetitle">基情链接</p>
    <ul>
      <!--li><a href="http://yangjian.me" target="_blank" title="YangJian">Alimon's Blog</a></li>
      <li><a href="http://hexo.io" target="_blank" title="Hexo">Hexo</a></li-->
      <li><a href="http://oucg.sinaapp.com/" target="_blank" title="ouchengeng's blog">欧小本的小站</a></li>
      <li><a href="http://faneshion.github.io/fancy" target="_blank" title="faneshion's blog">范老师不要域名</a></li>
    </ul>
</div>


  
  <div class="archiveslist">
    <p class="asidetitle"><a href="/archives">Archives</a></p>
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12">December 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11">November 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10">October 2014</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09">September 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08">August 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07">July 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06">June 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05">May 2014</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04">April 2014</a><span class="archive-list-count">1</span></li></ul>
  </div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> It&#39;s not about the salary <br/>
			It&#39;s all about reality</p>
	</section>
	 
	<div class="social-font clearfix">
		
		<a href="http://weibo.com/1394458123" target="_blank" title="weibo"></a>
		
		
		
		<a href="https://github.com/lisnb" target="_blank" title="github"></a>
		
		
		<a href="https://www.facebook.com/li.lisnb.1" target="_blank" title="facebook"></a>
		
		
	</div>
		<p class="copyright">Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2014 
		
		<a href="http://lixipeng.me" target="_blank" title="lisnb">lisnb</a>
		
		</p>
</div>
</footer>
    <!--script src="/js/jquery-2.1.0.min.js"></script--!>
<script src="http://libs.useso.com/js/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>


<script type="text/javascript">
  var duoshuoQuery = {short_name:"lisnb"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 



<!--link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css"--!>
<link rel="stylesheet" href="http://libs.useso.com/js/fancybox/2.1.5/jquery.fancybox.min.css" media="screen" type="text/css">
<!--script src="/fancybox/jquery.fancybox.pack.js"></script--!>
<script src="http://libs.useso.com/js/fancybox/2.1.5/jquery.fancybox.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



  </body>
</html>
